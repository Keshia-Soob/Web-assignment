{% extends "base.html" %}
{% load static %}

{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Kaushan+Script&family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'users/css/create_account.css' %}">

<div class="account-page">
  <h1 class="account-title">Create your account</h1>

  <div class="account-grid">
    <!-- left card -->
    <div class="profile-card">
      <div class="profile-image-wrap">
        <img id="profilePreview"
             src="{% if profile.profile_picture %}{{ profile.profile_picture.url }}{% else %}{% static 'users/images/empty profile.png' %}{% endif %}"
             alt="Profile picture" class="profile-image">
        <button type="button" class="edit-button" id="editImageBtn" title="Edit photo">âœŽ</button>
      </div>

      <input id="id_profile_picture" name="profile_picture" type="file" accept="image/*" style="display:none;">

      <p class="profile-add-text">Add a profile picture</p>

      <div class="about-section">
      </div>
    </div>

    <!-- right form card -->
    <div class="account-form-card">
      <form method="post" enctype="multipart/form-data" id="accountForm">
        {% csrf_token %}
        <div class="form-grid">
          <!-- Row 1: name / surname -->
          <div class="form-field">
            <label class="form-label">Name</label>
            <input type="text" name="name" placeholder = "Name" value="{{ profile.name|default:'' }}" class="form-input" required>
          </div>
          <div class="form-field">
            <label class="form-label">Surname</label>
            <input type="text" name="surname" placeholder = "Surname" value="{{ profile.surname|default:'' }}" class="form-input" required>
          </div>

          <!-- Row 2: email / dob (3 selects) -->
          <div class="form-field">
            <label class="form-label">E-mail</label>
            <input type="email" name="email" placeholder = "Email" value="{{ profile.email|default:'' }}" class="form-input" required>
          </div>
          <div class="form-field dob-field">
            <label class="form-label">Date of Birth</label>
            <div class="dob-selects">
              <select name="dob_day" class="form-input small-select">
                {% for d in days %}
                  <option value="{{ d }}" {% if profile.date_of_birth and profile.date_of_birth.day == d %}selected{% endif %}>{{ d|stringformat:"02d" }}</option>
                {% endfor %}
              </select>

              <select name="dob_month" class="form-input small-select">
                {% for m in months %}
                  <option value="{{ m }}" {% if profile.date_of_birth and profile.date_of_birth.month == m %}selected{% endif %}>{{ m }}</option>
                {% endfor %}
              </select>

              <select name="dob_year" class="form-input small-select">
                {% for y in years %}
                  <option value="{{ y }}" {% if profile.date_of_birth and profile.date_of_birth.year == y %}selected{% endif %}>{{ y }}</option>
                {% endfor %}
              </select>
            </div>
          </div>

          <!-- Row 3: telephone / phone -->
          <div class="form-field">
            <label class="form-label">Telephone</label>
            <input type="text" name="telephone" placeholder = "Telephone number" value="{{ profile.telephone|default:'' }}" class="form-input" required>
          </div>
          <div class="form-field">
            <label class="form-label">Phone Number</label>
            <input type="text" name="phone_number" placeholder = "Phone number" value="{{ profile.phone_number|default:'' }}" class="form-input" required>
          </div>

          <!-- Row 4: sex / empresa -->
          <div class="form-field">
            <label class="form-label">Sex</label>
            <select name="sex" class="form-input">
              <option value="Male" {% if profile.sex == "Male" %}selected{% endif %}>Male</option>
              <option value="Female" {% if profile.sex == "Female" %}selected{% endif %}>Female</option>
            </select>
          </div>

          <!-- Row 5: address / city -->
          <div class="form-field">
            <label class="form-label">Address</label>
            <input type="text" name="address" placeholder = "Address" value="{{ profile.address|default:'' }}" class="form-input" required>
          </div>
          <div class="form-field">
            <label class="form-label">City</label>
            <input type="text" name="city" placeholder = "City" value="{{ profile.city|default:'' }}" class="form-input" required>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="save-button">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script src="{% static 'js/account.js' %}"></script>
{% endblock %}
