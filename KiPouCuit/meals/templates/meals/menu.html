{% extends 'base.html' %}
{% load static %}

{% block title %}Menu{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'meals/MenuStyle.css' %}">

<div class="menu-container">
  <div class="menu-title">
    <h1>Our Delicious Menu</h1>
    <p>Explore our wide variety of mouth-watering dishes</p>
  </div>

  <!-- Menu Controls -->
  <div class="menu-controls">
    <div class="cuisine-selector">
      <select id="cuisineFilter">
        <option value="all">All Cuisines</option>
        <option value="indian">Indian</option>
        <option value="mauritian">Mauritian</option>
        <option value="english">English</option>
        <option value="french">French</option>
        <option value="asian">Asian</option>
        <option value="thai">Thai</option>
      </select>
    </div>
  </div>

  {% for category in categories %}
  <div class="category-section">
    <div class="category-title">
      <h2>{{ category.name }}</h2>
    </div>

    <div class="food-grid">
      {% for item in category.items.all %}
      <div class="food-item"
           data-cuisine="{{ item.cuisine|lower }}"
           data-id="{{ item.id }}"
           data-name="{{ item.name }}"
           data-price="{{ item.price|floatformat:0 }}">
        <div class="food-image"
             style="background-image: url('{{ item.display_image_url }}');">
        </div>
        <div class="food-details">
          <h3 class="food-name">{{ item.name }}</h3>
          <p class="food-description">{{ item.description }}</p>
          <div class="food-footer">
            <span class="food-price">Rs {{ item.price|floatformat:0 }}</span>
            <button class="add-btn">Add</button>
          </div>
        </div>
      </div>
      {% empty %}
        <p>No items in this category yet.</p>
      {% endfor %}
    </div>
  </div>
  {% endfor %}
</div>

<!-- Tiny client-side cuisine filter to match your data-* attributes -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const filter = document.getElementById("cuisineFilter");
  const items  = document.querySelectorAll(".food-item");

  function applyFilter() {
    const val = filter.value;
    items.forEach(it => {
      const ok = (val === "all") || (it.dataset.cuisine === val);
      it.style.display = ok ? "" : "none";
    });
  }
  filter.addEventListener("change", applyFilter);
  applyFilter();
});
</script>
{% endblock %}
